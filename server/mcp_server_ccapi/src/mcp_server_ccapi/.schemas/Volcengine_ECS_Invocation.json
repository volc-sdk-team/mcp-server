{"typeName": "Volcengine::ECS::Invocation", "description": "云助手是火山引擎打造的原生自动化运维工具。您可以创建立即执行、周期执行、定时执行的作业任务，创建完成后完，云助手客户端将按照执行模式自动开始执行。", "tagging": {"taggable": true, "tagOnCreate": true, "tagUpdatable": true}, "definitions": {"InvocationResult": {"properties": {"CommandId": {"description": "命令ID。", "type": "string"}, "EndTime": {"description": "命令执行的完成时间。", "type": "string"}, "ErrorCode": {"description": "命令执行失败的错误码。TaskDeliveryTimeout：表示命令下发超时。TaskExecutionTimeout：表示命令执行超时。TaskExecutionFailed：表示命令执行失败。", "type": "string"}, "ErrorMessage": {"description": "命令执行失败的错误信息。", "type": "string"}, "ExitCode": {"description": "脚本执行后的退出状态码。", "type": "integer"}, "InstanceId": {"description": "实例ID。", "type": "string"}, "InvocationId": {"description": "任务执行ID。", "type": "string"}, "InvocationResultId": {"description": "任务执行结果ID。", "type": "string"}, "InvocationResultStatus": {"description": "单台实例的命令进度状态。", "type": "string"}, "Output": {"description": "经过Base64编码的命令执行后输出信息。", "type": "string"}, "StartTime": {"description": "命令在实例中开始执行的时间。", "type": "string"}, "Username": {"description": "在实例中执行命令的用户名称。", "type": "string"}}, "type": "object"}, "ParameterDefinition": {"properties": {"DecimalPrecision": {"description": "自定义参数值（数字）允许的小数点后位数。", "default": 0, "maximum": 10, "minimum": 0, "type": "integer"}, "DefaultValue": {"description": "自定义参数默认值。", "type": "string"}, "MaxLength": {"description": "自定义参数值（字符串）的最大长度。", "maximum": 1000, "type": "integer"}, "MaxValue": {"description": "自定义参数值（数字）的最大值。", "type": "string"}, "MinLength": {"description": "自定义参数值（字符串）的最小长度。", "maximum": 1000, "type": "integer"}, "MinValue": {"description": "自定义参数值（数字）的最小值。", "type": "string"}, "Name": {"description": "自定义参数名称，需要在脚本中通过{{Param}}定义 。", "maxLength": 64, "type": "string"}, "Required": {"description": "是否必填。true：必填。false：非必填。", "type": "boolean"}, "Type": {"description": "自定义参数类型。String：表示自定义参数类型字符串类型。Digit：表示自定义参数类型为数值类型。", "type": "string", "enum": ["String", "Digit"]}}, "type": "object"}, "Tag": {"required": ["Key", "Value"], "properties": {"Key": {"type": "string"}, "Value": {"type": "string"}}, "type": "object"}}, "properties": {"CommandContent": {"description": "命令内容。", "type": "string"}, "CommandDescription": {"description": "被调用命令的描述。", "type": "string"}, "CommandId": {"description": "命令ID。", "type": "string"}, "CommandName": {"description": "任务触发时的命令名称。", "type": "string"}, "CommandProvider": {"description": "被调用命令的提供方。", "type": "string"}, "CommandType": {"description": "作业触发的命令类型。", "type": "string"}, "EnableParameter": {"description": "被调用命令是否使用自定义参数。true：已启用。false：未启用。", "type": "boolean"}, "EndTime": {"description": "任务结束时间。", "type": "string"}, "Frequency": {"description": "执行频率。RepeatMode=Rate 时本参数必填。格式：<执行间隔数值><执行间隔单位>，执行间隔单位：支持分钟（5m-60m）、小时（1h-24h）和天（1d-7d）。执行间隔基于固定频率，与作业实际执行需要的时间无关。创建作业后基于LaunchTime执行一次，根据间隔设置确定下一次执行时间。", "type": "string"}, "InstanceIds": {"description": "实例ID列表，最多支持200个ID。", "maxItems": 200, "uniqueItems": true, "type": "array", "items": {"type": "string"}, "insertionOrder": false}, "InstanceNumber": {"description": "执行实例数量。", "type": "integer"}, "InvocationDescription": {"description": "作业描述，默认为空字符串，不超过256个字符。", "maxLength": 256, "type": "string", "semantic": "description"}, "InvocationId": {"description": "任务执行 ID。", "type": "string", "semantic": "resourceId"}, "InvocationName": {"description": "作业名称。不超过64个字符。暂不限制特殊字符。同地域下作业名称可重复。", "maxLength": 64, "type": "string", "semantic": "resourceName"}, "InvocationResults": {"description": "单台实例执行命令的结果。", "uniqueItems": true, "type": "array", "items": {"$ref": "#/definitions/InvocationResult"}, "insertionOrder": false}, "InvocationStatus": {"description": "命令执行的总执行状态。", "type": "string"}, "LaunchTime": {"description": "执行时间。", "type": "string"}, "ParameterDefinitions": {"uniqueItems": true, "type": "array", "items": {"$ref": "#/definitions/ParameterDefinition"}, "insertionOrder": false}, "Parameters": {"description": "命令中包含自定义参数时，需通过本参数传入自定义参数的键值对。自定义参数个数范围为0~60。Key不允许为空字符串，最多支持64个字符。Value允许为空字符串。自定义参数与原始命令内容在Base64编码后，综合长度不能超过16KB。设置的自定义参数名集合必须为创建命令时定义的参数集的子集。对于未传入的参数，使用默认值代替。", "type": "string"}, "ProjectName": {"description": "资源所属项目，一个资源只能归属于一个项目。", "type": "string", "semantic": "projectName"}, "RecurrenceEndTime": {"description": "周期结束时间，仅适用于周期任务（Rate）。", "type": "string"}, "RepeatMode": {"description": "设置命令执行的方式。Once：默认，表示立即执行命令。Rate：周期执行命令，需要通过Frequency参数传入Rate表达式指定执行周期。Fixed：定时执行命令，需要通过LaunchTime参数指定的执行时间。", "type": "string", "enum": ["Once", "Rate", "Fixed"]}, "StartTime": {"description": "任务开始时间。", "type": "string", "semantic": "createdTime"}, "Tags": {"uniqueItems": true, "type": "array", "items": {"$ref": "#/definitions/Tag"}, "insertionOrder": false, "semantic": "tags"}, "Timeout": {"description": "创建的命令在ECS实例中执行时最大的超时时间，单位为秒。默认值：60。可选范围为：30~86400。", "default": 60, "maximum": 86400, "minimum": 30, "type": "integer"}, "Username": {"description": "在ECS实例中执行命令的用户名称。", "type": "string"}, "WindowsPassword": {"description": "自定义windows用户的密码。", "type": "string"}, "WorkingDir": {"description": "创建的命令在ECS实例中运行的目录。", "type": "string"}}, "required": ["CommandId", "InvocationName", "InstanceIds"], "readOnlyProperties": ["/properties/InvocationId", "/properties/CommandProvider", "/properties/CommandDescription", "/properties/EnableParameter", "/properties/InstanceNumber", "/properties/EndTime", "/properties/StartTime", "/properties/CommandContent", "/properties/InvocationStatus", "/properties/CommandType", "/properties/CommandName", "/properties/ParameterDefinitions", "/properties/InvocationResults"], "writeOnlyProperties": ["/properties/InstanceIds", "/properties/WindowsPassword"], "createOnlyProperties": ["/properties/InvocationName", "/properties/InvocationDescription", "/properties/WorkingDir", "/properties/Username", "/properties/WindowsPassword", "/properties/Timeout", "/properties/InstanceIds", "/properties/RepeatMode", "/properties/Frequency", "/properties/LaunchTime", "/properties/RecurrenceEndTime", "/properties/ProjectName", "/properties/CommandId", "/properties/Parameters"], "primaryIdentifier": ["/properties/InvocationId"], "additionalProperties": false, "handlers": {"create": {"permissions": ["ecs:InvokeCommand", "ecs:TagResources", "ecs:DescribeInvocations", "ecs:DescribeInvocationInstances", "ecs:DescribeInstances", "ecs:DescribeInvocationResults"]}, "delete": {"permissions": ["ecs:StopInvocation", "ecs:DescribeInvocations"]}, "list": {"permissions": ["ecs:DescribeInvocations"]}, "read": {"permissions": ["ecs:DescribeInvocations", "ecs:DescribeInvocationInstances", "ecs:DescribeInstances", "ecs:DescribeInvocationResults"]}, "update": {"permissions": ["ecs:UntagResources", "ecs:TagResources", "ecs:DescribeInvocations", "ecs:DescribeInvocationInstances", "ecs:DescribeInstances", "ecs:DescribeInvocationResults"]}}}